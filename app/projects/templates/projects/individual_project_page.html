{% extends "base.html" %}
{% load static %}
{% load wagtailcore_tags %}
{% load wagtailimages_tags %}
{% load compress %}
{% block body_class %}template-individualprojectpage{% endblock %}
{% block extra_css %}
    {% compress css %}
    {% endcompress css %}
{% endblock extra_css %}

{% block content %}
    {% include "ui/components/BasePageHeader.html" with title=page.title subtitle=page.owner_program.title|add:" â€¢ "|add:page.location image=page.header_image %}

    <div class="max-w-7xl mx-auto" x-init="isLandingPage = false">
        <div class="grid grid-cols-1 lg:grid-cols-3">
            
            {% comment %} BODY {% endcomment %}
            <div class="p-10 col-span-2">
                <div class="base-article-m">
                    <div class="text-intro">
                        {{ page.intro|safe }}
                    </div>
                    {{ page.description }}
                </div>
                {% include "ui/components/CTABodyPanelBase.html" with title=page.call_to_action_title text=page.call_to_action_description linktext=page.call_to_action_link_text linkurl=page.call_to_action_link_url %}
            </div>

            {% comment %} SIDEBAR {% endcomment %}
            <div class="p-10 col-span-1">
                {% comment %} NOTE TO SELF: the "safe" thing is only needed temporarily until everything is put in {% endcomment %}
                <div class="project-sidebar">
                    <div>
                        <p>{{page.impact_areas_title}}</p>
                        <p>{{page.impact_areas|safe}}</p>
                    </div>
                    <div>
                        <p>{{page.region_hub_title}}</p>
                        <p><a href="{{page.owner_region_hub.url}}">{{page.owner_region_hub.title}}</a></p>
                    </div>
                    <div>
                        <p>{{page.duration_title}}</p>
                        <p>{{page.duration}}</p>
                    </div>
                    <div>
                        <p>{{page.partners_title}}</p>
                        <p>{{page.partners|safe}}</p>
                    </div>
                    <div>
                        <p>{{page.tools_title}}</p>
                        <p>{{page.tools|safe}}</p>
                    </div>
                    <div>
                        <p>{{page.contact_title}}</p>
                        <p>{{page.contact|safe}}</p>
                    </div>
                </div>

                {% if page.related_news %}
                <div class="my-12">
                    <h1 class="text-h2 font-bold mb-4">
                        {{ page.related_news_title }}
                    </h1>
                    {% include "ui/components/BaseLink.html" with linkurl="#" linktext=page.view_all_news_text %}
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-4">
                        {% with allnews=page.related_news %}
                            {% for news in allnews %}
                                {% include "ui/components/news/NewsPreviewBlockProjects.html" with news=news.value %}
                            {% endfor %}
                        {% endwith %}
                    </div>
                </div>
                {% endif %}
                
                <div class="my-12">
                    <h1 class="text-h2 font-bold mb-4">
                        {{ page.related_events_title }}
                    </h1>
                    {% include "ui/components/BaseLink.html" with linkurl="#" linktext=page.view_all_events_text %}
                </div>
            </div>
        </div>

        {% comment %} BOTTOM AREA {% endcomment %}
        <div class="grid grid-cols-1 md:grid-cols-2 text-white my-10 mx-5">
            <div class="mx-5 mb-10 md:mb-0">
                {% include "ui/components/dogear_boxes/DogearRed.html" with title=page.red_box_title linktext=page.red_box_link_text linkurl=page.red_box_link_url %}
            </div>
            <div class="mx-5">
                {% include "ui/components/dogear_boxes/DogearBlack.html" with title=page.black_box_title linktext=page.black_box_link_text linkurl=page.black_box_link_url %}
            </div>
        </div>
    </div>
{% endblock %}